<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Potentiometer</title>
 	<style>
 		html,body{height:100%;margin:0;font-family:Segoe UI,Roboto,Arial,sans-serif;}
 		body{display:flex;align-items:center;justify-content:center;background:#fff;}
 		.container{text-align:center;padding:12px;max-width:500px}
 		.slider-container{margin:30px 0}
 		input[type="range"]{width:100%;height:8px;cursor:pointer;accent-color:#007bff}
 		.value-display{font-size:28px;font-weight:700;margin:20px 0;color:#333}
 		.status-leds{display:flex;justify-content:center;gap:20px;margin-top:30px}
 		.led-status{width:60px;height:60px;border-radius:50%;background:#ccc;transition:all 0.3s ease}
 		.led-status.active{background:#0066ff;box-shadow:0 0 10px rgba(0,102,255,0.8)}
 		.led-status.red{background:#ff0000;box-shadow:0 0 10px rgba(255,0,0,0.8)}
 		.led-label{font-size:12px;margin-top:5px;font-weight:600}
 	</style>
</head>
<body>
 	<div class="container">
 		<h1 id="title">Potenciometro</h1>
		<h4>Equipo 9</h4>
		<p>Angel Gabriel Aguilar Saldivar - 202224429, Diego Cannata Cárdenas - 202229430, Keira Marisa Garrido Aguirre - 202230800</p>
 		
 		<div class="slider-container">
 			<input type="range" id="potSlider" min="0" max="4095" value="0">
 		</div>
 		
 		<div class="value-display">
 			Voltaje: <span id="voltValue">0.00</span>V
 		</div>
 		
 		<div class="status-leds">
 			<div>
 				<div id="led-green" class="led-status"></div>
 				<div class="led-label">LED 1 (≥1.5V & <2.2V)</div>
 			</div>
 			<div>
 				<div id="led-red" class="led-status"></div>
 				<div class="led-label">LED 2 (≥2.2V)</div>
 			</div>
 		</div>
 	</div>

 	<script>
 		(function(){
 			const slider = document.getElementById('potSlider');
 			const voltValue = document.getElementById('voltValue');
 			const ledGreen = document.getElementById('led-green');
 			const ledRed = document.getElementById('led-red');
 			const SERVER_IP = '192.168.100.80';

 			async function sendSliderValue(){
 				try{
 					const sliderVal = slider.value;
 					const response = await fetch(`http://${SERVER_IP}/pot/value?value=${sliderVal}`);
 					if(response.ok){
 						const data = await response.text();
 						const voltage = parseFloat(data);
 						
 						voltValue.textContent = voltage.toFixed(2);
 						
 						// Update LED status based on voltage
 						ledGreen.classList.remove('active');
 						ledRed.classList.remove('red');
 						
 						if (voltage >= 1.5 && voltage < 2.2) {
 							ledGreen.classList.add('active');
 						} else if (voltage >= 2.2) {
 							ledRed.classList.add('red');
 						}
 					}
 				}catch(err){
 					console.error('Failed to send slider value:', err);
 				}
 			}

 			// Send slider value on input
 			slider.addEventListener('input', sendSliderValue);
 			
 			// Initial update
 			sendSliderValue();
 		})();
 	</script>
</body>
</html>